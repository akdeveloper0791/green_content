
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
{% block header %}
{% include 'header.html' %}
{% endblock %}
</head>

<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="{% static 'uploadform/fonts/css/font-awesome.min.css' %}">
<!--===============================================================================================-->
	<!--<link rel="stylesheet" type="text/css" href="{% static 'uploadform/vendor/animate/animate.css' %}">-->
<!--===============================================================================================-->

<!--===============================================================================================-->
	<!--<link rel="stylesheet" type="text/css" href="{% static 'uploadform/vendor/animsition/css/animsition.min.css' %}">-->
<!--===============================================================================================-->

<!--===============================================================================================-->
	<!--<link rel="stylesheet" type="text/css" href="{% static 'uploadform/css/util.css' %}">-->
	<!--<link rel="stylesheet" type="text/css" href="{% static 'uploadform/css/main.css' %}">-->
	<link rel="stylesheet" type="text/css" href="{% static 'uploadform/css/style.css' %}">
<!--===============================================================================================-->

<!--<link rel="stylesheet" type="text/css" href="{% static 'multi_select_dropdown/bootstrap-select.min.css' %}">-->
<!--	<script src="{% static 'multi_select_dropdown/bootstrap-select.min.js' %}"></script>-->

<!--	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.2/css/bootstrap-select.min.css">-->
<!--	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.2/js/bootstrap-select.min.js"></script>-->
<!--	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.2/js/i18n/defaults-*.min.js"></script>-->

<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>-->
<!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.min.css" />-->
<!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>-->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css" />
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.min.js"></script>

<body>
{% block body %}
<br/><br/><br/><br/>
<style>
    .btn-group{
        width:350%;
    }
    .body-content .sign-in-page form .form-group span {
        color: black;
    padding: 12px;
    }
</style>

<div class="body-content">
	<div class="container">
		<div class="sign-in-page">
			<div class="row">

<!--test-->
<div class="col-md-12 col-sm-12 create-new-account">
	<center><h4 class="checkout-subtitle"> Upload Content Form</h4></center>
	<p class="text title-tag-line">Select your media files and upload to your account library.</p>
		<form id="upload-file" method="post" enctype="multipart/form-data">
	    {% csrf_token %}
		<div class="form-group">
	    	<label class="info-title" for="exampleInputEmail2">Select File <span>*</span></label>
	    	<div class="fileupload fileupload-new image-preview-input" data-provides="fileupload">
                            <span class="btn btn-info btn-file"><span class="fileupload-new image-preview-input" style="color:white;">Select file</span>
                            <span class="fileupload-exists" style="color:white;">Change</span><input type="file" name="file" id="file" required/></span>
                            <span class="fileupload-preview"></span>
                            <a  class="close fileupload-exists" data-dismiss="fileupload" style="float:none;color:red;">Ã—</a>
            </div>
	  	</div>
        <div class="form-group">
		    <label class="info-title" for="exampleInputEmail1">Content Description <span>*</span></label>
		    <input type="text" class="form-control unicase-form-control text-input" name="desc" placeholder="your message here..." id="description" required>
		</div>
        <div class="form-group">
		    <label class="info-title" for="exampleInputEmail1">Search Keywords (Comma Separated) <span>*</span></label>
		    <input type="text" class="form-control unicase-form-control text-input" name="keys" id="Keyword" placeholder="Please enter multiple search keywords with comma Separated" required>
		</div>
        <div class="form-group">
		    <label class="info-title" for="exampleInputEmail1">Select Content Type <span>*</span></label><br/>
		    <input type="radio" name="Private"  value="private" class="private" id="private" onclick="show();" checked="checked" ><span class="buying-selling-word" style="padding-right:20px;">Private</span>
            <input type="radio" name="Private" value="public" class="public" id="public" onclick="hide();"><span class="buying-selling-word">Public</span><br/>
		</div>

         <div class="form-group" id="emaildiv">
		    <label class="info-title" for="exampleInputEmail1">Select GC Group <span>*</span></label>
        <select class="multiselect" multiple="multiple" name="groups"></select>
        </div>


 <div class="form-group" style="display:none;">

		    <input type="text" class="form-control unicase-form-control text-input" name="email_gc_name" id="email_gc_name" >
		</div>


<br/>
<br/>
<center><button type="submit" class="btn-upper btn btn-primary checkout-page-button" id="upload-file-btn"><i class="fa fa-cloud-upload" aria-hidden="true"></i> Upload</button></center>
</form>

</div>
<!--end test-->
<!-- create a new account -->			</div><!-- /.row -->
		</div><!-- /.sigin-in-->

</div><!-- /.container -->
</div><!-- /.body-content -->

<!--===============================================================================================-->
	<!--<script src="{% static 'uploadform/vendor/animsition/js/animsition.min.js' %}"></script>-->
<!--===============================================================================================-->
	<!--<script src="{% static 'uploadform/vendor/bootstrap/js/popper.js' %}"></script>-->
	<!--<script src="{% static 'uploadform/vendor/bootstrap/js/bootstrap.min.js' %}"></script>-->
<!--===============================================================================================-->

	<!--<script src="{% static 'multi_select_dropdown/bootstrap-select.min.js' %}"></script>-->
<!--===============================================================================================-->

	<!--<script src="{% static 'uploadform/vendor/countdowntime/countdowntime.js' %}"></script>-->
<!--===============================================================================================-->
	<!--<script src="{% static 'uploadform/js/main.js' %}"></script>-->

	<!--<script src="{% static 'uploadform/js/Imagepage.js' %}"></script>-->
		<script src="{% static 'uploadform/js/index.js' %}"></script>
	<!--<script src='https://code.jquery.com/jquery-latest.min.js'></script>-->

		<script type="text/javascript">

		var val = [];

// 		$('.selectpicker').selectpicker();

		//Plug-in function for the bootstrap version of the multiple email
		$(function() {
			//To render the input device to multiple email input using BootStrap icon
			$('#example_emailBS').multiple_emails({position: "bottom"});
			//OR $('#example_emailBS').multiple_emails("Bootstrap");

			//Shows the value of the input device, which is in JSON format
			$('#current_emailsBS').text($('#example_emailBS').val());
			$('#example_emailBS').change( function(){
				$('#current_emailsBS').text($(this).val());
			});
		});

	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-23581568-13');
</script>

<script type="text/javascript">

		$(window).resize(function() {
		  if ($(window).width() <= 600) {
		    $('#prop-type-group').removeClass('btn-group');
		    $('#prop-type-group').addClass('btn-group-vertical');
		  } else {
		    $('#prop-type-group').addClass('btn-group');
		    $('#prop-type-group').removeClass('btn-group-vertical');
		  }
		});

</script>

<script type="text/javascript">


	(function( $ ){

     $.fn.multipleInput = function() {

          return this.each(function() {

               // create html elements

               // list of email addresses as unordered list
               $list = $('<ul />');

               // input
               var $input = $('<input type="text" />').keyup(function(event) {

                    if(event.which == 32 || event.which == 188) {
                         // key press is space or comma
                        var val = $(this).val().slice(0, -1); // remove space/comma from value

                         // append to list of emails with remove button
                         $list.append($('<li class="multipleInput-email"><span> ' + val + '</span></li>')
                              .append($('<a class="multipleInput-close" title="Remove">x</a>')
                                   .click(function(e) {
                                        $(this).parent().remove();
                                        e.preventDefault();
                                   })
                              )
                         );
                         $(this).attr('placeholder', '');
                         // empty input
                         $(this).val('');
                    }

               });

               // container div
               var $container = $('<div class="multipleInput-container" />').click(function() {
                    $input.focus();
               });

               // insert elements into DOM
               $container.append($list).append($input).insertAfter($(this));

               // add onsubmit handler to parent form to copy emails into original input as csv before submitting
               var $orig = $(this);
               $(this).closest('form').submit(function(e) {

                    var emails = new Array();
                    $('.multipleInput-email span').each(function() {
                         emails.push($(this).html());
                    });
                    emails.push($input.val());

                    $orig.val(emails.join());

               });

               return $(this).hide();

          });

     };
})( jQuery );

$('#my_input').multipleInput();
// function submit(){

// var val = document.getElementsByClassName("multipleInput-container");
// console.log(val);
// }


</script>

<script>
      var file_name;

        var video_format = ['wmv','avi','mpeg','mpg','3gp','webm','mp4','mkv','jpg','jpeg','png','bmp','gif','mp3','m4a','ts','flac','wav','ogg','xmf','ota'];

        $(".image-preview-input input:file").change(function (){
          var file = this.files[0];

          //file_name = this.files[0];

          var matching_format_res = Formats(file_get_ext(file.name));

          //console.log(matching_format_res);

          if(matching_format_res==true)
          {
              file_name = this.files[0];

          }else
          {
              swal("File Format Not Supported..!");
              windows.location.reload();
          }

        });

          function Formats(res_format)
        {
          var res = false;
          if(video_format!=null && video_format.length>=1)
          {
            var totalength =video_format.length;
            for(var i=0;i<totalength;i++)
            {
              var format = video_format[i];

             // console.log(format);

              if(format==res_format)
              {

                  res = true;

                  return res;

              }

            }

            return res;

          }

        }

         function file_get_ext(filename)
        {
          return typeof filename != "undefined" ? filename.substring(filename.lastIndexOf(".")+1, filename.length).toLowerCase() : false;
        }
</script>
<script>
function hide(){
    document.getElementById("emaildiv").style.display="none";
}
function show(){
    document.getElementById("emaildiv").style.display="block";
}

function selectdropdown(result)
{


  $.map(result, function (x) {
    return $('.multiselect').append("<option value='"+x.group_id+"'>" + x.group_name + "</option>");
  });

  $('.multiselect')
    .multiselect({
      allSelectedText: 'All',
      maxHeight: 100,
      includeSelectAllOption: true
    })
    .multiselect('selectAll', true)
    .multiselect('updateButtonText');
}





	window.onload = function getDataResults()
		{


			var form_data = new FormData();
				//form_data.append('accessToken',getAccessToken);

				$.ajax(
				  {
					  type:'GET',
					  url: "https://www.greencontent.in/My_GC_Groups_Api/",
					  data:{

					  },
					  success: function(data)
					  {
						//console.log("data result==="+JSON.stringify(data));
						 //disableButton(id);

						try {
							//var jsonResponse = JSON.parse(data);

							  if(data['status']==true)
							  {
								var responsedata = data['result'];

								//console.log("data result==="+JSON.stringify(responsedata));

							selectdropdown(responsedata);

							  }
							  else if(data['status']==false)
							  {
							    var responsedata = data['result'];

							    //$("#appendDetails").empty();

							    //$('#notwishlistfound').show();

							    //document.getElementById('notwishlistfound').innerHTML = responsedata;

								 //console.log(responsedata);
							  }

						}
						catch(Exception)
						{
							alert(Exception.message);
						}

					  }
				   });

		 }




$(function() {
    $('#upload-file-btn').click(function() {
            var file = document.getElementById('file').value;
            var description = document.getElementById('description').value;
            var keyword = document.getElementById('Keyword').value;
            var email_gc = document.getElementById('email_gc_name').value;




            if(file=="" || file=="null" || file==" " || file=="undefined"){

                         swal({
            title: 'Please select media file type.!',
            timer: 2000
          });
          return false;
            }else if(description=="" || description=="null" || description==" " || description=="undefined"){
                swal({
            title: 'Please enter description.!',
            timer: 2000
          });
          return false;
            }else if(keyword=="" || keyword=="null" || keyword==" " || keyword=="undefined"){
                          swal({
            title: 'Please enter keywords.!',
            timer: 2000
          });
            return false;

            }
        //     else if(email_gc=="" || email_gc=="null" || email_gc==" " || email_gc=="undefined"){
        //                   swal({
        //     title: 'Please select GC group.!',
        //     timer: 2000
        //   });
        //     return false;

        //     }


         $(':checkbox:checked').each(function(i){
          val[i] = $(this).val();
        });
        var str =JSON.stringify(val);
        var arr = str.replace (/"/g,'');
        arr1 = arr.replace('multiselect-all,','');
        // var array = JSON.parse("[" + arr1 + "]");
         var array = JSON.parse( arr1);
        // console.log(typeof(array));
        //  console.log(JSON.stringify(array));
        for(var i=0;i<array.length;i++){
            var record = array[i];
            console.log("Asdas"+record);
            }


        if(document.getElementById('private').checked){
            var select_type = "private";
            if(arr1=="" || arr1=="null" || arr1==" " || arr1=="undefined" || arr1=="[]"){
                          swal({
            title: 'Please select GC group.!',
            timer: 2000
          });
            return false;

            }
            document.getElementById("email_gc_name").value=arr1;
        }else if (document.getElementById('public').checked) {
                     var select_type = "public";
                    document.getElementById("email_gc_name").value="[]";
                }






            ajaxindicatorstart("<img src='{% static "images/ajax-loader.gif" %}'><br/> Content Upload is in Progress...");





        		var form_data = new FormData();
			    form_data.append($('#upload-file')[0]);

        $.ajax({
            type: 'GET',
            url: '/upload_api',
            data: form_data,
            success: function(data) {
                alert("success");

               // console.log('Success!');
					//	console.log("data==="+JSON.stringify(data));
                        	try {

							  if(data['status']==true)
							  {
							      swal("Error, success.");

                                     ajaxindicatorstop();
							  }
							  else if(data['status']==false)
							  {

                                    swal("Error, Please contact us.");
                                     ajaxindicatorstop();

							  }

						}
						catch(Exception)
						{
							alert(Exception.message);
						}

}
});

});
});


</script>


{% endblock %}

{% block footer %}
{% include 'footer.html' %}
{% endblock %}
</body>
</html>
